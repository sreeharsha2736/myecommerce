{"ast":null,"code":"import _toConsumableArray from\"C:/Users/SONU/Desktop/github/ecommerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from\"react\";import{addToCart,removeFromCart}from\"../actions/cartActions\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CartScreen(props){var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var productId=props.match.params.id;console.log(productId);var qty=props.location.search?Number(props.location.search.split(\"=\")[1]):1;console.log(Number(props.location.search.split(\"=\")[1]));var dispatch=useDispatch();useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[]);var removeFromCartHandler=function removeFromCartHandler(productId){dispatch(removeFromCart(productId));};var checkoutHandler=function checkoutHandler(){props.history.push(\"/signin?redirect=shipping\");};console.log(cartItems);return/*#__PURE__*/_jsxs(\"div\",{className:\"cart pl-2 my-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-list \",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"pt-5\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"Cart is empty\"}):cartItems.map(function(item){return/*#__PURE__*/_jsx(\"li\",{style:{listStyle:\"none\",border:\"1px solid grey\"},className:\"my-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-image col-4\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:\"product\",style:{width:\"250px\"}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-5 pl-5\",children:[/*#__PURE__*/_jsx(\"h1\",{children:/*#__PURE__*/_jsx(Link,{to:\"/products/\"+item.product,children:item.name})}),/*#__PURE__*/_jsx(\"h5\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-price\",children:[\"$\",item.amount*1]})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Qty:\",/*#__PURE__*/_jsx(\"select\",{value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,e.target.value));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:\"Delete\"})]})]})]})},item.name);})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-action pl-5\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Subtotal ( \",cartItems.reduce(function(a,c){return a+c.qty;},0),\" items) : $\",\" \",cartItems.reduce(function(a,c){return a+c.amount*c.qty;},0)]}),/*#__PURE__*/_jsx(\"button\",{onClick:checkoutHandler,className:\"button primary full-width\",disabled:cartItems.length===0,children:\"Proceed to Checkout\"})]})]});}export default CartScreen;","map":{"version":3,"sources":["C:/Users/SONU/Desktop/github/ecommerce/frontend/src/Screens/CartScreen.js"],"names":["React","useEffect","addToCart","removeFromCart","useDispatch","useSelector","Link","CartScreen","props","cart","state","cartItems","productId","match","params","id","console","log","qty","location","search","Number","split","dispatch","removeFromCartHandler","checkoutHandler","history","push","length","map","item","listStyle","border","image","width","product","name","amount","e","target","value","Array","countInStock","keys","x","reduce","a","c"],"mappings":"8KAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,SAAT,CAAoBC,cAApB,KAA0C,wBAA1C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,IAAT,KAAqB,kBAArB,C,wFACA,QAASC,CAAAA,UAAT,CAAoBC,KAApB,CAA2B,CACzB,GAAMC,CAAAA,IAAI,CAAGJ,WAAW,CAAC,SAACK,KAAD,QAAWA,CAAAA,KAAK,CAACD,IAAjB,EAAD,CAAxB,CADyB,GAGjBE,CAAAA,SAHiB,CAGHF,IAHG,CAGjBE,SAHiB,CAKzB,GAAMC,CAAAA,SAAS,CAAGJ,KAAK,CAACK,KAAN,CAAYC,MAAZ,CAAmBC,EAArC,CACAC,OAAO,CAACC,GAAR,CAAYL,SAAZ,EACA,GAAMM,CAAAA,GAAG,CAAGV,KAAK,CAACW,QAAN,CAAeC,MAAf,CACRC,MAAM,CAACb,KAAK,CAACW,QAAN,CAAeC,MAAf,CAAsBE,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CAAD,CADE,CAER,CAFJ,CAGAN,OAAO,CAACC,GAAR,CAAYI,MAAM,CAACb,KAAK,CAACW,QAAN,CAAeC,MAAf,CAAsBE,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CAAD,CAAlB,EACA,GAAMC,CAAAA,QAAQ,CAAGnB,WAAW,EAA5B,CAEAH,SAAS,CAAC,UAAM,CACd,GAAIW,SAAJ,CAAe,CACbW,QAAQ,CAACrB,SAAS,CAACU,SAAD,CAAYM,GAAZ,CAAV,CAAR,CACD,CACF,CAJQ,CAIN,EAJM,CAAT,CAKA,GAAMM,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACZ,SAAD,CAAe,CAC3CW,QAAQ,CAACpB,cAAc,CAACS,SAAD,CAAf,CAAR,CACD,CAFD,CAGA,GAAMa,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5BjB,KAAK,CAACkB,OAAN,CAAcC,IAAd,CAAmB,2BAAnB,EACD,CAFD,CAGAX,OAAO,CAACC,GAAR,CAAYN,SAAZ,EACA,mBACE,aAAK,SAAS,CAAC,gBAAf,wBACE,YAAK,SAAS,CAAC,YAAf,uBACE,YAAI,SAAS,CAAC,MAAd,wBACE,qCADF,CAGGA,SAAS,CAACiB,MAAV,GAAqB,CAArB,cACC,sCADD,CAGCjB,SAAS,CAACkB,GAAV,CAAc,SAACC,IAAD,qBACZ,WAEE,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAb,CAAqBC,MAAM,CAAE,gBAA7B,CAFT,CAGE,SAAS,CAAC,MAHZ,uBAKE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAC,kBAAf,uBACE,YACE,GAAG,CAAEF,IAAI,CAACG,KADZ,CAEE,GAAG,CAAC,SAFN,CAGE,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAT,CAHT,EADF,EADF,cAQE,aAAK,SAAS,CAAC,WAAf,wBACE,iCACE,KAAC,IAAD,EAAM,EAAE,CAAE,aAAeJ,IAAI,CAACK,OAA9B,UAAwCL,IAAI,CAACM,IAA7C,EADF,EADF,cAIE,iCACE,aAAK,SAAS,CAAC,YAAf,eAA8BN,IAAI,CAACO,MAAL,CAAc,CAA5C,GADF,EAJF,cAOE,2CAEE,eACE,KAAK,CAAEP,IAAI,CAACZ,GADd,CAEE,QAAQ,CAAE,kBAACoB,CAAD,QACRf,CAAAA,QAAQ,CAACrB,SAAS,CAAC4B,IAAI,CAACK,OAAN,CAAeG,CAAC,CAACC,MAAF,CAASC,KAAxB,CAAV,CADA,EAFZ,UAMG,mBAAIC,KAAK,CAACX,IAAI,CAACY,YAAN,CAAL,CAAyBC,IAAzB,EAAJ,EAAqCd,GAArC,CAAyC,SAACe,CAAD,qBACxC,eAAoB,KAAK,CAAEA,CAAC,CAAG,CAA/B,UACGA,CAAC,CAAG,CADP,EAAaA,CAAC,CAAG,CAAjB,CADwC,EAAzC,CANH,EAFF,cAcE,aAdF,cAeE,aAfF,cAgBE,eACE,SAAS,CAAC,gBADZ,CAEE,OAAO,CAAE,yBAAMpB,CAAAA,qBAAqB,CAACM,IAAI,CAACK,OAAN,CAA3B,EAFX,oBAhBF,GAPF,GARF,GALF,EACOL,IAAI,CAACM,IADZ,CADY,EAAd,CANJ,GADF,EADF,cA2DE,aAAK,SAAS,CAAC,kBAAf,wBACE,oCACczB,SAAS,CAACkC,MAAV,CAAiB,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAAGC,CAAC,CAAC7B,GAAhB,EAAjB,CAAsC,CAAtC,CADd,eACmE,GADnE,CAEGP,SAAS,CAACkC,MAAV,CAAiB,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAAGC,CAAC,CAACV,MAAF,CAAWU,CAAC,CAAC7B,GAA3B,EAAjB,CAAiD,CAAjD,CAFH,GADF,cAKE,eACE,OAAO,CAAEO,eADX,CAEE,SAAS,CAAC,2BAFZ,CAGE,QAAQ,CAAEd,SAAS,CAACiB,MAAV,GAAqB,CAHjC,iCALF,GA3DF,GADF,CA2ED,CAED,cAAerB,CAAAA,UAAf","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { addToCart, removeFromCart } from \"../actions/cartActions\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nfunction CartScreen(props) {\r\n  const cart = useSelector((state) => state.cart);\r\n\r\n  const { cartItems } = cart;\r\n\r\n  const productId = props.match.params.id;\r\n  console.log(productId);\r\n  const qty = props.location.search\r\n    ? Number(props.location.search.split(\"=\")[1])\r\n    : 1;\r\n  console.log(Number(props.location.search.split(\"=\")[1]));\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (productId) {\r\n      dispatch(addToCart(productId, qty));\r\n    }\r\n  }, []);\r\n  const removeFromCartHandler = (productId) => {\r\n    dispatch(removeFromCart(productId));\r\n  };\r\n  const checkoutHandler = () => {\r\n    props.history.push(\"/signin?redirect=shipping\");\r\n  };\r\n  console.log(cartItems);\r\n  return (\r\n    <div className=\"cart pl-2 my-5\">\r\n      <div className=\"cart-list \">\r\n        <ul className=\"pt-5\">\r\n          <h3>Shopping Cart</h3>\r\n\r\n          {cartItems.length === 0 ? (\r\n            <div>Cart is empty</div>\r\n          ) : (\r\n            cartItems.map((item) => (\r\n              <li\r\n                key={item.name}\r\n                style={{ listStyle: \"none\", border: \"1px solid grey\" }}\r\n                className=\"my-4\"\r\n              >\r\n                <div className=\"row\">\r\n                  <div className=\"cart-image col-4\">\r\n                    <img\r\n                      src={item.image}\r\n                      alt=\"product\"\r\n                      style={{ width: \"250px\" }}\r\n                    />\r\n                  </div>\r\n                  <div className=\"pt-5 pl-5\">\r\n                    <h1>\r\n                      <Link to={\"/products/\" + item.product}>{item.name}</Link>\r\n                    </h1>\r\n                    <h5>\r\n                      <div className=\"cart-price\">${item.amount * 1}</div>\r\n                    </h5>\r\n                    <div>\r\n                      Qty:\r\n                      <select\r\n                        value={item.qty}\r\n                        onChange={(e) =>\r\n                          dispatch(addToCart(item.product, e.target.value))\r\n                        }\r\n                      >\r\n                        {[...Array(item.countInStock).keys()].map((x) => (\r\n                          <option key={x + 1} value={x + 1}>\r\n                            {x + 1}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                      <br />\r\n                      <br />\r\n                      <button\r\n                        className=\"btn btn-danger\"\r\n                        onClick={() => removeFromCartHandler(item.product)}\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            ))\r\n          )}\r\n        </ul>\r\n      </div>\r\n      <div className=\"cart-action pl-5\">\r\n        <h3>\r\n          Subtotal ( {cartItems.reduce((a, c) => a + c.qty, 0)} items) : ${\" \"}\r\n          {cartItems.reduce((a, c) => a + c.amount * c.qty, 0)}\r\n        </h3>\r\n        <button\r\n          onClick={checkoutHandler}\r\n          className=\"button primary full-width\"\r\n          disabled={cartItems.length === 0}\r\n        >\r\n          Proceed to Checkout\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CartScreen;\r\n"]},"metadata":{},"sourceType":"module"}